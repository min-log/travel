<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout/basic}">
<th:block layout:fragment="content">
  <div class="container container-fluid" th:object="${userTravel}">
    <h2 class="tit text-center mt-5 mb-5">마이페이지</h2>
    <div class="mypage_wrap content_nav">
      <!-- start : navbar -->
      <div class="navbar  ">
        <div class="profile_card border rounded-3 p-3 mb-3">
          <p class="profile_image_wrap border">
            <img sec:authorize="isAuthenticated()" th:if="${session.userT != null && session.userT.userSocial == false}" th:src="'/upload/member/' + ${session.userT.profile}" src="https://github.com/mdo.png" th:alt="${session.userT.userId} + '님의 프로필 이미지'" class="">
            <img sec:authorize="isAuthenticated()" th:if="${session.userT != null && session.userT.userSocial == false && session.userT.profile == null}" th:src="'/upload/member/' + ${session.userT.profile}" src="https://github.com/mdo.png" th:alt="${session.userT.userId} + '님의 프로필 이미지'" class="">
            <img sec:authorize="isAuthenticated()" th:if="${session.userT != null && session.userT.userSocial == true}" th:src="${session.userT.profile}" src="/img/profile_img.png" th:alt="${session.userT.userId} + '님의 프로필 이미지'" class="">
          </p>
          <p class="id m-3" th:if="${session.userT != null}" th:text="${session.userT.userId}"></p>
          <a th:href="@{/mypage/userImageModify}" class="btn btn-sm btn-outline-secondary">회원 사진 변경하기</a>
        </div>

        <ul class="list-group mb-3">
          <li class="list-group-item d-flex justify-content-between lh-sm">
            <a>
              <h6 class="my-0">내 여행</h6>
            </a>
          </li>
          <li class="list-group-item d-flex justify-content-between lh-sm">
            <a>
              <h6 class="my-0">찜리스트</h6>
            </a>
          </li>
          <li class="list-group-item d-flex justify-content-between lh-sm">
            <a th:href="@{/mypage/userModify}">
              <h6 class="my-0">회원정보 수정</h6>
            </a>
          </li>
          <li class="list-group-item d-flex justify-content-between lh-sm">
            <a>
              <h6 class="my-0">회원탈퇴</h6>
            </a>
          </li>
        </ul>

      </div>
      <!-- end : navbar -->
      <!-- start : content -->
      <div class="content ">
        <div class="content-tit">
          <h4 class="tit_con mb-3">회원 정보수정</h4>
        </div>


        <form id="joinForm" th:action="@{/join}" enctype="multipart/form-data" th:method="post" >
          <table>
            <colgroup>
              <col style="width:100px">
              <col style="width:calc(100% - 100px)">
            </colgroup>
            <tbody>
            <tr>
              <th>
                <label for="userId">
                  아이디
                </label>
              </th>
              <td>
                <div class="x_auto">
                  <input th:id="idInput" th:field="*{userId}" name="userId" id="userId" class="form-control"
                         th:errorclass="err" type="text" placeholder="아이디를 입력하세요." readonly>
                </div>
                <p class="check-msg-id txt_info mt-1"></p>
              </td>
            </tr>
            <tr>
              <th><label for="name">이름 </label></th>
              <td><input th:field="*{name}"  name="name" id="name" class="form-control" type="text" readonly></td>
            </tr>
            <tr>
              <th>생년월일 </th>
              <td><input th:field="*{userBirthday}" class="form-control" name="userBirthday" id="userBirthday" readonly></td>
            </tr>
            <tr>
              <th><label for="userEmail">이메일 </label></th>
              <td>
                <input th:field="*{userEmail}" name="userEmail1" id="userEmail" class="form-control" type="text" readonly>
              </td>
            </tr>
            <tr>
              <th>성별</th>
              <td>
                <label for="userGenderM">
                  <input name="userGender" id="userGenderM" value="userGenderM" type="radio"  th:checked="${userTravel.userGender eq 'userGenderM'}" checked="checked" disabled/> 남성
                </label>
                <label for="userGenderW" class="ml-2">
                  <input  name="userGender" id="userGenderW" value="userGenderW" type="radio" th:checked="${userTravel.userGender eq 'userGenderW'}" disabled/> 여성
                </label>
              </td>
            </tr>

            <tr>
              <th>비밀번호 </th>
              <td>
                <button id="PasswordModify"  type="button" class="btn btn-dark btn-sm">비밀번호 변경</button>

              </td>
            </tr>
            <tr>
              <th>연락처 </th>
              <td><input th:field="*{userPhone}" name="userPhone" id="userPhone"   class="form-control" type="text"  placeholder="연락처를 입력하세요. EX) 010-0000-0000"></td>
            </tr>
            <tr>
              <th>주소 </th>
              <td class="address_wrap">
                <div class="address_post x_auto">
                  <input type="text" id="addressPostcode" th:field="*{addressPostcode}" placeholder="우편번호" class="form-control">
                  <input type="button" onclick="addressPostcodes()" value="우편번호 찾기" class="btn btn-dark btn-sm ml-2">
                </div>
                <div class="address_info">
                  <input type="text" id="address" th:field="*{address}" placeholder="주소" class="form-control">
                </div>
                <div class="address_detail x_auto">
                  <input type="text" id="addressDetail" th:field="*{addressDetail}" placeholder="상세주소" class="form-control">
                  <input type="text" id="addressExtra" th:field="*{addressExtra}" placeholder="참고항목" class="form-control ml-2">
                </div>


              </td>
            </tr>


            </tbody>
          </table>
          <a class="w-100 btn btn-primary mt-4" href="javascript:void(0)" onclick="joinForm()" >수정하기</a>
        </form>


      </div>
    </div>
    <!-- end : mypage_wrap-->
    <!-- Modal -->
    <script type="text/javascript">
        $(function (){
            $('#PasswordModify').on('click',function (){
                $('#modalPassword').modal("show");
            });



            let idValue =$('#idInput').val();

            $.ajax({

            })

        })
    </script>

    <div class="modal fade" id="modalPassword" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="staticBackdropLabel"> 비밀번호 변경 </h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p class="modal-message">
            <form class="password_wrap" method="get" th:action="@{/mypage/passwordCheck}">
              <table>
                <colgroup>
                  <col style="width:130px">
                  <col style="" >
                </colgroup>
                <tbody>
                <tr>
                  <th>변경 전 : </th>
                  <td>
                    <input th:field="*{password}" name="password" id="password" type="password" class="form-control" placeholder="영어와 숫자로 포함해서 6~12자리 이내로 입력해주세요.">
                  </td>
                </tr>
                <tr>
                  <th>변경 비밀번호 : </th>
                  <td>
                    <input th:field="*{password}" name="password" id="password" type="password" class="form-control" placeholder="영어와 숫자로 포함해서 6~12자리 이내로 입력해주세요.">
                  </td>
                </tr>
                </tbody>
              </table>
              <a class="btn btn-primary btn-sm w-100 mt-5" href="#">확인</a>
            </form>

            </p>
          </div>
        </div>
      </div>
    </div>
    <!-- end 폼 저장 및 모달 -->


  </div>


</th:block>
</html>

